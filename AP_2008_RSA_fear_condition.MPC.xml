<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<?xml-stylesheet type="text/xsl" href="comments.xsl"?>
<program>
<title>Fear Conditioning Paradigm Code - Antonio Paolini&quot;s 2008 third-year research group</title>
<history>
<revision number="1.0">
<author>Simeon Morgan &lt;smorgan@students.latrobe.edu.au&gt;</author>
<created>2008-07-02 14:09</created>
<summary>First version</summary>
</revision>
</history>
<constant group="general" represents="parameter" name="Def_MaxTrials" summary="Default maximum number of trials to be recorded/processed"></constant>
<constant group="general" represents="parameter" name="Abs_MaxTrials" summary="Limit on maximum number of trials to be recorded/processed"></constant>
<constant group="general" represents="parameter" name="Def_MinITI" summary="Default minimum Inter-trial interval (in sec)"></constant>
<constant group="general" represents="parameter" name="Def_MaxITI" summary="Default maximum Inter-trial interval (in sec)"></constant>
<constant group="general" represents="parameter" name="Def_ShocksOn" summary="Whether to deliver shocks (1=on, 0=off)"></constant>
<constant group="general" represents="parameter" name="Def_TrialsType" summary="Default trials type (0=acoustic, 1=electrical, 2=random)"></constant>
<array name="G" outputName="Configuration" summary="">
<column name="G_MaxTrials" outputName="Max Trials" summary="Number of trials before automatic termination"></column>
<column name="G_ShocksOn" outputName="Shocks on" summary="Whether to deliver shocks"></column>
<column name="G_TrialsType" outputName="Trials type" summary="Type of trials to present (0=acoustic, 1=electrical)"></column>
<column name="G_ShockDurationMsec" outputName="Shock duration" summary="Duration (in ms) of foot-shock entered at configuration time -&gt; then copied to ^G_ShockDurationSec for actual use"></column>
<column name="G_ShockDurationSec" summary="Duration (in s) of foot-shock"></column>
<column name="G_ToneDurationSec" outputName="Tone duration" summary="Duration of tone presentation in seconds"></column>
<column name="G_ToneFrequency" outputName="Tone frequency" summary="Tone frequency in Hz"></column>
<column name="G_DiscrimToneFrequency" outputName="Discriminant tone frequency" summary="Discriminant tone frequency in Hz"></column>
<column name="G_ToneSPL" outputName="Tone SPL" summary="Tone sound pressure level in dB"></column>
<column name="G_MinITI" outputName="Min ITI" summary="Minimum inter-trial interval (in sec)"></column>
<column name="G_MaxITI" outputName="Max ITI" summary="Maximum inter-trial interval (in sec)"></column>
<column name="G_ToneShockDelay" summary="Pause (in sec) between onset of tone and onset of shock. Auto-calculated."></column>
<column name="G_ShockDuration" summary="Duration (in ticks) of foot-shock - autogenerated"></column>
<column name="G_CamUnconnectedState" summary="Used to store 'Unconnected' StateID of camera"></column>
<column name="G_CamConnectOkState" summary="Used to store 'Ok' StateID of camera"></column>
<column name="G_CamConnectFailState" summary="Used to store 'Fail' StateID of camera"></column>
<column name="G_UltrasonicIndexOffset" summary="Array offset for ultrasonic time recording"></column>
<column name="G_USSequentialReadingA" summary="Number of sequential ultrasonic detections A"></column>
<column name="G_USEventIndexA" summary="Index of current event for ultrasonic A"></column>
<column name="G_USSequentialReadingB" summary="Number of sequential ultrasonic detections B"></column>
<column name="G_USEventIndexB" summary="Index of current event for ultrasonic B"></column>
</array>
<enum name="G_ShocksOn" summary="Identifiers for shocks on or off">
<option value="0" name="^G_ShocksOn_Off" summary="Shocks turned off"></option>
<option value="0" name="^G_ShocksOn_On" summary="Shocks turned on"></option>
</enum>
<!--<variable alias="" name="" summary=""></variable>-->
<variable alias="Maximum Trials" name="G(^G_MaxTrials)" summary="Number of trials before automatic termination"></variable>
<variable alias="Deliver shocks" name="G(^G_ShocksOn)" summary="Whether shocks will be delivered"></variable>
<variable alias="Trial type" name="G(^G_TrialsType)" summary="Type of trials (0=acoustic, 1=electrical, 2=random)">"></variable>
<variable alias="Shock Duration (msec)" name="G(^G_ShockDurationMsec)" summary="Duration (in msec) of foot-shock for configuration only"></variable>
<variable alias="Tone Duration" name="G(^G_ToneDurationSec)" summary="Duration (in seconds) of presented tone stimulus"></variable>
<variable alias="Tone Frequency" name="G(^G_ToneFrequency)" summary="Frequency (in Hz) of presented tone stimulus"></variable>
<variable alias="Discriminant Tone Frequency" name="G(^G_DiscrimToneFrequency)" summary="Frequency (in Hz) of presented discriminant tone stimulus"></variable>
<variable alias="Tone Sound Pressure Level" name="G(^G_ToneSPL)" summary="Sound Pressure Level (in dB) of presented tone stimulus"></variable>
<variable alias="Minimum Inter-trial Interval (sec)" name="G(^G_MinITI)" summary="Minimum inter-trial interval (in sec)"></variable>
<variable alias="Maximum Inter-trial Interval (sec)" name="G(^G_MaxITI)" summary="Maximum inter-trial interval (in sec)"></variable>
<input name="Inp_HeadEntry" summary="Input ID of the head entry unit on pellet dispenser"></input>
<input name="Inp_Lickometer" summary="Input ID of the lickometer"></input>
<input name="Inp_LeverTrigger" summary="Input ID of the fixed lever 'starting' trigger"></input>
<input name="Inp_LeverInputLeft" summary="Input ID of retractable lever on the left"></input>
<input name="Inp_LeverInputRight" summary="Input ID of retractable lever on the right"></input>
<input name="Inp_UltrasonicA" summary="Input ID of ultrasonic input 1 of 2"></input>
<input name="Inp_UltrasonicB" summary="Input ID of ultrasonic input 2 of 2"></input>
<output name="Out_SnackDispenser" summary="Output ID of feeder unit."><use>Dispenses on OFF->ON transition</use></output>
<output name="Out_BeverageDispenser" summary="Output ID of drinking unit."><use>Toggle liquid availability: OFF->Unavailable, ON->Available</use></output>
<output name="Out_LeftLeverRetract" summary="Output trigger to extend/retract left lever"><use>Toggle extended state of lever; OFF->Not extended, ON->Extended</use></output>
<output name="Out_RightLeverRetract" summary="Output trigger to extend/retract right lever"><use>Toggle extended state of lever; OFF->Not extended, ON->Extended</use></output>
<output name="Out_LickShockSwitch" summary="Output ID of ENV-250A Contact Lickometer switching unit."><use>OFF->Lickometer active, ON->Floor connected to shock emitter</use></output>
<output name="Out_Ultrasonic" summary="Output ID of ultrasonic recording unit."><use>???</use></output>
<output name="Out_ShockEmitter" summary="Output ID of shock unit."><use>Toggle shock delivery: OFF->No shock presently being delivered, ON->CONTINUOUS SHOCK PRESENTLY BEING DELIVERED</use></output>
<output name="Out_HouseLightRear" summary="Output ID of rear-most house light."><use>OFF->unlit, ON->lit</use></output>
<output name="Out_HouseLightMid" summary="Output ID of miidle house light."><use>OFF->unlit, ON->lit</use></output>
<output name="Out_HouseLightFront" summary="Output ID of front-most house light."><use>OFF->unlit, ON->lit</use></output>
<output name="Out_LedRed" summary="Output ID of Red LED (rearmost)."><use>OFF->unlit, ON->lit</use></output>
<output name="Out_LedGreen" summary="Output ID of Green LED (frontmost)."><use>OFF->unlit, ON->lit</use></output>
<output name="Out_LedYellow" summary="Output ID of Yellow LED (middle)."><use>OFF->unlit, ON->lit</use></output>
<output name="Out_Fan" summary="Output ID of venting fan."><use>OFF->fan off, ON->fan on</use></output>
<output name="Out_TDSound" summary="Output ID of 'Sound playing' indicator for Tucker Davis equipment."><use>OFF->No sound playing, ON->sound playin</use></output>
<output name="Out_TDStim" summary="Output ID to trigger electrical stimulation of brain by Tucker Davis equipment."><use>OFF->No stimulation, ON->Stimulation</use></output>
<output name="Out_TDShock" summary="Output ID of 'Shocking' indicator for Tucker Davis equipment."><use>OFF->No shock currently being delivered, ON->Shock currently being delivered</use></output>
<constant group="audio" represents="parameter" name="Snd_ToneDuration" summary="Duration of presentation of tone stimulus (in ms)"></constant>
<constant group="audio" represents="parameter" name="Snd_ToneFrequency" summary="Default tone frequency in Hz"></constant>
<constant group="audio" represents="parameter" name="Snd_DiscrimToneFrequency" summary="Default discriminant tone frequency in Hz"></constant>
<constant group="audio" represents="parameter" name="Snd_ToneSPL" summary="Default sound pressure at which to present tones (in dB)"></constant>
<constant group="audio" represents="parameter" name="Snd_RiseFallTime" summary="Rise/Fall time (in ms)"></constant>
<constant group="shock" represents="parameter" name="Shk_ShockDuration" summary="Duration of the electrical shock co-terminating with tone (in ms)"></constant>
<constant group="k-pulse" represents="parameter" name="KP_ExperimentEnd" summary="Trigger the experiment to end"></constant>
<constant group="z-pulse" represents="parameter" name="ZP_TrialStart" summary="Signals commencement of a trial"></constant>
<constant group="z-pulse" represents="parameter" name="ZP_TrialEnd" summary="Signals end of a trial"></constant>
<constant group="z-pulse" represents="parameter" name="ZP_TerminateExperiment" summary="End the experiment - may be used if error occurrs"></constant>
<constant group="z-pulse" represents="parameter" name="ZP_ExperimentEnd" summary="Trigged to end the experiment"></constant>
<constant group="z-pulse" represents="parameter" name="ZP_ShockTrigger" summary="Trigger to send shock information to TD gear"></constant>
<constant group="z-pulse" represents="parameter" name="ZP_StartVideoRec" summary="Start video recording"></constant>
<constant group="z-pulse" represents="parameter" name="ZP_EndVideoRec" summary="End video recording"></constant>
<array name="J" outputName="Trial summary" summary="Trial summary data">
<column name="J_CompletedTrials" outputName="Completed trials" summary="Total number of trials that have occurred so far"></column>
<column name="J_CompletedAcousticTrials" outputName="Completed acoustic trials" summary="Total number of acoustic trials that have occurred so far"></column>
<column name="J_CompletedElectricalTrials" outputName="Completed electrical trials" summary="Total number of electrical trials that have occurred so far"></column>
<column name="J_CompletedDiscrimTrials" outputName="Completed discriminating trials" summary="Total number of acoustic trials of an alternate frequency without shock that have occurred so far"></column>
<column name="J_MeanITI" outputName="Mean ITI" summary="Mean Inter-trial interval"></column>
<column name="J_CurrentHours" outputName="Hours" summary="Hours since commencement (for H:M:S.MS)"></column>
<column name="J_CurrentMinutes" outputName="Minutes" summary="Minutes since commencement (for H:M:S.MS)"></column>
<column name="J_CurrentSeconds" outputName="Seconds" summary="Seconds since commencement (for H:M:S.MS)"></column>
<column name="J_CurrentMilliseconds" outputName="Milliseconds" summary="Milliseconds since commencement (for H:M:S.MS) "></column>
</array>
<array name="K" outputName="Trials" summary="Specific trial data">
<column name="K_TrialNumber" outputName="Trial number" summary="Number of this trial"></column>
<column name="K_TrialTimeHour" outputName="Hour" summary="Time post-commencement (H) this trial occurred"></column>
<column name="K_TrialTimeMinute" outputName="Minute" summary="Time post-commencement (M) this trial occurred"></column>
<column name="K_TrialTimeSecond" outputName="Second" summary="Time post-commencement (S) this trial occurred"></column>
<column name="K_TrialTimeMillisecond" outputName="Millisecond" summary="Time post-commencement (MS) this trial occurred"></column>
<column name="K_TrialMsec" outputName="Msec from start" summary="Time post-commencement (msec) this trial occurred TOTAL - Not related to H:M:S"></column>
<column name="K_ToneFrequency" outputName="Tone Frequency" summary="Frequency of tone presented"></column>
<column name="K_ToneSPL" outputName="Tone SPL" summary="Sound Pressure of tone presented"></column>
<column name="K_PreITI" outputName="Pre-trial interval" summary="Interval prior to this trial"></column>
<column name="K_TrialType" outputName="Trial type" summary="0=acoustic trial, 1=electrical trial, 2=discriminant acoustic trial without shock"></column>
<column name="K_Shock" outputName="Shocked" summary="0=no shock occurred, 1=shock occurred"></column>
</array>
<constant group="general" represents="parameter" name="K_TrialIndexMultiplier" summary="Multiplier to be used for each trial"></constant>
<array name="F" summary="Interval offset multipliers">
<column name="F_IntervalOffset" summary="An integer 0-120 to multiply by the (MaxITI - MinITI) and divided by 120 to get the 'inter-trial interval'" />
</array>
<constant group="general" represents="parameter" name="F_TotalOffsets" summary="Divisor to be used when using the offsets from array F (= max value of array of F, so after division falls into range 0-1 inclusive)"></constant>
<array name="I" summary="Integer list representing electrical vs acoustic stimulation">
<column name="I_TrialType" summary="Trial type - 0=acoustic, 1=electrical, 2=discriminant acoustic"></column>
</array>
<enum name="I_TrialType" summary="Identifiers for trial types">
<option value="0" name="^I_TrialType_Acoustic" summary="Acoustic trial"></option>
<option value="1" name="^I_TrialType_Electrical" summary="Electrical trial"></option>
<option value="2" name="^I_TrialType_DiscrimAcoustic" summary="Discriminant Acoustic trial"></option>
</enum>
<array name="H" summary="Ultrasonic signal data">
<column name="H_StartHour" summary="Hour of this event starting"></column>
<column name="H_StartMinute" summary="Minute of this event starting"></column>
<column name="H_StartSecond" summary="Second of this event starting"></column>
<column name="H_StartMillisecond" summary="Millisecond of this event starting"></column>
<column name="H_StartMsec" summary="Absolute milliseconds of this event starting"></column>
<column name="H_EndHour" summary="Hour of this event ending"></column>
<column name="H_EndMinute" summary="Minute of this event ending"></column>
<column name="H_EndSecond" summary="Second of this event ending"></column>
<column name="H_EndMillisecond" summary="Millisecond of this event ending"></column>
<column name="H_EndMsec" summary="Absolute milliseconds of this event ending"></column>
<column name="H_Band" summary="Which band led to the trigger"></column>
</array>
<constant group="general" represents="parameter" name="H_IndexMultiplier" summary="Multiplier to be used for each signal"></constant>
<!--<variable name="" summary=""></variable>-->
<variable name="L" summary="Trial type"></variable>
<variable name="P" summary="Storage variable for camera state"></variable>
<variable name="Q" summary="Current offset for B array"></variable>
<variable name="R" summary="Inter-trial pause in ticks (generated)"></variable>
<variable name="S" summary="Inter-trial pause in seconds (generated)"></variable>
<variable name="X" summary="Inter-trial countdown in seconds (generated)"></variable>
<variable name="V" summary="Temporary store for shuffling data to sound processor"></variable>
<variable name="T" summary="Timer - # of msec since commencement"></variable>
<variable name="U" summary="Timer - variable swapping 1"></variable>
<variable name="W" summary="Timer - variable swapping 2"></variable>
<stateset id="1" summary="Run the preparation and termination functions of the program">
<state id="1" summary="Set variables to default values">
</state>
<state id="5" summary="Pause until start command is issued; then convert used-data from ms to sec where required and continue. Presumably variables are set when start is triggered.">
</state>
<state id="10" summary="Wait for program termination">
</state>
<state id="10" summary="Turn off all outputs, save data and end">
</state>
</stateset>
<stateset id="2" summary="Operate the experiment functionally">
<state id="1" summary="Wait for the start trigger">
</state>
<state id="2" summary="Generate randomly-determined Inter-Trial Pause, and update trial data">
</state>
<state id="5" summary="Acoustic trial - Commence tone after inter-trial delay">
</state>
<state id="6" summary="Acoustic trial - Pause until shock delivery, then commence shock">
</state>
<state id="7" summary="Acoustic trial - Wait shock duration then end shock">
</state>
<state id="9" summary="Electrical trial - commence tone after inter-trial delay">
</state>
<state id="10" summary="Electrical Trial - Continue stimulus when should would be occurring">
</state>
<state id="11" summary="Electrical Trial - Wait shock duration then end stimulus">
</state>
<state id="13" summary="Discriminant trial - Commence tone after inter-trial delay">
</state>
<state id="14" summary="Discriminant trial - Wait 'shock delay' duration still playing tone">
</state>
<state id="15" summary="Discriminant trial - Wait 'shock duration' then end">
</state>
<state id="31" summary="Check if full number of trials have been completed, and if so issue terminate command.">
</state>
</stateset>
<stateset id="3" summary="Run the countdown display">
<state id="1" summary="Wait for the start trigger">
</state>
<state id="2" summary="Wait for countdown commencement">
</state>
<state id="3" summary="Run countdown">
</state>
</stateset>
<stateset id="7" summary="Timer - counts up in msec (in steps of 10 msec)">
<state id="1" summary="Wait for start trigger">
</state>
<state id="2" summary="Increment counter, hour, minutes, seconds, milliseconds">
</state>
</stateset>
<stateset id="20" summary="Camera management - connect to camera system and start/stop video">
<state id="1" summary="Set constants for video connection state">
</state>
<state id="2" summary="Wait for video commands">
</state>
</stateset>
<stateset id="21" summary="Capture ultrasonic A signal times">
<state id="1" summary="Wait for start signal">
</state>
<state id="2" summary="Wait for an ultrasonic signal; 2 sequential readings of ultrasonic sound are required - otherwise counted as a 'glitch'">
</state>
<state id="3" summary="Wait until no ultrasonic signal for 20ms, then reset to 'no-ultrasonic' state">
</state>
</stateset>
<stateset id="22" summary="Capture ultrasonic B signal times">
<state id="1" summary="Wait for start signal">
</state>
<state id="2" summary="Wait for an ultrasonic signal; 2 sequential readings of ultrasonic sound are required - otherwise counted as a 'glitch'">
</state>
<state id="3" summary="Wait until no ultrasonic signal for 20ms, then reset to 'no-ultrasonic' state">
</state>
</stateset>
<stateset id="23" summary="Signal handler for shock signals">
<state id="1" summary="Wait for start signal">
<state id="2" summary="Check for experiment termination">
</state>
</state>
<state id="3" summary="Trigger a ZP_ExperimentEnd every 10ms - this will make sure that everything receives it even">
</state>
</stateset>
<stateset id="25" summary="Experiment timer - check if experiment has reached maximum duration">
<state id="1" summary="Wait for start trigger">
<state id="2" summary="Check for experiment termination">
</state>
</state>
<state id="3" summary="Trigger a ZP_ExperimentEnd every 10ms - this will make sure that everything receives it even">
</state>
</stateset>
</program>
